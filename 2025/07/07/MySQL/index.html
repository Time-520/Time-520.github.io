<!-- build time:Tue Jul 15 2025 16:42:55 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="字节纪元" href="https://time-520.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="字节纪元" href="https://time-520.github.io/atom.xml"><link rel="alternate" type="application/json" title="字节纪元" href="https://time-520.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><link rel="canonical" href="https://time-520.github.io/2025/07/07/MySQL/"><title>MySQL基础 | ByteChronicle = 字节纪元</title><meta name="generator" content="Hexo 5.4.2"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">MySQL基础</h1><div class="meta"><span class="item" title="Created: 2025-07-07 10:13:01"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">Posted on</span> <time itemprop="dateCreated datePublished" datetime="2025-07-07T10:13:01+08:00">2025-07-07</time></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="Toggle navigation bar"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">ByteChronicle</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://www.dmoe.cc/random.php?469988"></li><li class="item" data-background-image="https://www.dmoe.cc/random.php?502312"></li><li class="item" data-background-image="https://www.dmoe.cc/random.php?429653"></li><li class="item" data-background-image="https://www.dmoe.cc/random.php?532898"></li><li class="item" data-background-image="https://www.dmoe.cc/random.php?265869"></li><li class="item" data-background-image="https://www.dmoe.cc/random.php?653904"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">Home</a></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="en"><link itemprop="mainEntityOfPage" href="https://time-520.github.io/2025/07/07/MySQL/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Years Pass"><meta itemprop="description" content=", 字节 + 编年史，记录开发旅程与项目成长。"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="字节纪元"></span><div class="body md" itemprop="articleBody"><h1 id="mysql概述"><a class="anchor" href="#mysql概述">#</a> MySQL 概述</h1><h2 id="数据库相关概念"><a class="anchor" href="#数据库相关概念">#</a> 数据库相关概念</h2><table><thead><tr><th style="text-align:center">名 称</th><th style="text-align:center">全 称</th><th style="text-align:center">简 称</th></tr></thead><tbody><tr><td style="text-align:center">数据库</td><td style="text-align:center">存储数据的仓库 数据是有组织的进行存储</td><td style="text-align:center">DataBase（DB）</td></tr><tr><td style="text-align:center">数据库管理系统</td><td style="text-align:center">操纵和管理数据库的大型软件</td><td style="text-align:center">DataBase Management System (DBMS)</td></tr><tr><td style="text-align:center">SQL</td><td style="text-align:center">操作关系型数据库的编程语言定义了一套操作关系型数据库统一标准</td><td style="text-align:center">Structured Query Language (SQL)</td></tr></tbody></table><p>总结：1. 数据库 ：数据存储的仓库 2. 数据库管理系统：操纵和管理数据库的大型软件 3.SQL：操作关系型数据库的编程语言 是一套标准</p><h2 id="mysql启动"><a class="anchor" href="#mysql启动">#</a> MySQL 启动</h2><p>net start mysql84<br>net stop mysql84<br>注：以管理员身份运行命令提示符</p><h2 id="客户端连接"><a class="anchor" href="#客户端连接">#</a> 客户端连接</h2><p>MySQL 自带的客户端命令行</p><h2 id="数据模型"><a class="anchor" href="#数据模型">#</a> 数据模型</h2><ul><li>关系型数据库（RDBMS）<br>概念：建立在关系模型基础上 由多张相互连接的二维表组成的数据库<br>特点：</li></ul><ol><li>使用表存储数据 格式统一 便于维护</li><li>使用 SQL 语言操作 标准统一 使用方便</li></ol><h1 id="sql"><a class="anchor" href="#sql">#</a> SQL</h1><h2 id="sql通用语法"><a class="anchor" href="#sql通用语法">#</a> SQL 通用语法</h2><ol><li>SQL 语句可以单行或多行书写 以分号结尾</li><li>SQL 语句可以使用空格 / 缩进来增强语句的可读性</li><li>MySQL 数据库的 SQL 语句不区分大小写 关键字建议使用大写</li><li>注释：单行注释：-- 注释内容 或 # 注释内容（MySQL 特有）<br>多行注释：/* 注释内容 */</li></ol><h2 id="sql分类"><a class="anchor" href="#sql分类">#</a> SQL 分类</h2><table><thead><tr><th style="text-align:center">分类</th><th style="text-align:center">全称</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center">DDL</td><td style="text-align:center">Data Definition Language</td><td style="text-align:center">数据定义语言 用来定义数据库对象（数据库 表 字段）</td></tr><tr><td style="text-align:center">DML</td><td style="text-align:center">Data Manipulation Language</td><td style="text-align:center">数据操作语言 用来对数据库表中的数据进行增删改</td></tr><tr><td style="text-align:center">DQL</td><td style="text-align:center">Data Query Language</td><td style="text-align:center">数据查询语言，用来查询数据库中表的记录</td></tr><tr><td style="text-align:center">DCL</td><td style="text-align:center">Data Control Language</td><td style="text-align:center">数据控制语言，用来创建数据库用户、控制数据库的访问权限</td></tr></tbody></table><h2 id="ddl-数据库操作"><a class="anchor" href="#ddl-数据库操作">#</a> DDL - 数据库操作</h2><ul><li>查询<br>查询所有数据库<br><code>show databases;</code><br>查询当前数据库<br><code>select database;</code></li><li>创建<br><code>create database (if not exists)数据库名(default charset字符集)(collate排序规则);</code></li><li>删除<br><code>drop database(if exists)数据库名;</code></li><li>使用<br><code>use 数据库名;</code></li></ul><h3 id="ddl-表操作-创建"><a class="anchor" href="#ddl-表操作-创建">#</a> DDL - 表操作 - 创建</h3><pre><code>CREATE TABLE 表名(
  字段1 类型 (comment 字段1 注解),
  字段2 类型 (comment 字段2 注解),
  ……
  字段n 类型 (comment 字段n 注解)
)
</code></pre><ul><li>注：最后一个字段后面没有 <code>(英语)逗号</code></li></ul><h3 id="ddl-表操作-查询"><a class="anchor" href="#ddl-表操作-查询">#</a> DDL - 表操作 - 查询</h3><p>查询当前数据库所有表<br><code>show tables;</code><br>查询表结构<br><code>desc 表名;</code><br>查询指定表的建表语句<br><code>show create table 表名;</code></p><h3 id="ddl-表操作-数据类型"><a class="anchor" href="#ddl-表操作-数据类型">#</a> DDL - 表操作 - 数据类型</h3><p>MySQL 中的数据类型有很多 主要分为三类：数值类型 字符串类型 日期时间类型</p><ul><li>数值类型：</li></ul><table><thead><tr><th style="text-align:left">类型</th><th style="text-align:center">大小</th><th style="text-align:center">有符号（signed）范围</th><th style="text-align:center">无符号（unsigned）范围</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:left">tinyint</td><td style="text-align:center">1 byte</td><td style="text-align:center">（-128，127）</td><td style="text-align:center">（0，255）</td><td style="text-align:center">小整数值</td></tr><tr><td style="text-align:left">smallint</td><td style="text-align:center">2 bytes</td><td style="text-align:center">（-32768，32767）</td><td style="text-align:center">（0，65535）</td><td style="text-align:center">大整数值</td></tr><tr><td style="text-align:left">mediumint</td><td style="text-align:center">3 bytes</td><td style="text-align:center">（-8388608,8388607）</td><td style="text-align:center">(0,16777215)</td><td style="text-align:center">大整数值</td></tr><tr><td style="text-align:left">int 或 integer</td><td style="text-align:center">4 bytes</td><td style="text-align:center">(-2147483648,2147483647)</td><td style="text-align:center">(0,4294967295)</td><td style="text-align:center">大整数值</td></tr><tr><td style="text-align:left">bigint</td><td style="text-align:center">8 bytes</td><td style="text-align:center">(-2<sup>63,2</sup>63-1)</td><td style="text-align:center">(0,2^64-1)</td><td style="text-align:center">极大整数值</td></tr><tr><td style="text-align:left">float</td><td style="text-align:center">4 bytes</td><td style="text-align:center">(-3.402823466E+38,3.402823466351E+38)</td><td style="text-align:center">0 和 (1.175494351E-38,3.402823466E+38)</td><td style="text-align:center">单精度浮点数值</td></tr><tr><td style="text-align:left">double</td><td style="text-align:center">8 bytes</td><td style="text-align:center">(-1.7976931348623157E+308,1.7976931348623157E+308)</td><td style="text-align:center">0 和 (2.2250738585072014E-308,1.7976931348623157E+308)</td><td style="text-align:center">双精度浮点数值</td></tr><tr><td style="text-align:left">decimal</td><td style="text-align:center"></td><td style="text-align:center">依赖于 M (精度) 和 D (标度) 的值</td><td style="text-align:center">依赖于 M (精度) 和 D (标度) 的值</td><td style="text-align:center">小数值（精确定点数）</td></tr></tbody></table><ul><li>字符串类型：</li></ul><table><thead><tr><th>类型</th><th>大小</th><th>描述</th></tr></thead><tbody><tr><td>char</td><td>0-255 bytes</td><td>定长字符串</td></tr><tr><td>varchar</td><td>0-65535 bytes</td><td>变长字符串</td></tr><tr><td>tinyblob</td><td>0-255 bytes</td><td>不超过 255 个字符的二进制数据</td></tr><tr><td>tinytext</td><td>0-255 bytes</td><td>短文本字符串</td></tr><tr><td>blob</td><td>0-65 535 bytes</td><td>二进制形式的长文本数据</td></tr><tr><td>text</td><td>0-65 535 bytes</td><td>长文本数据</td></tr><tr><td>mediumblob</td><td>0-16777215 bytes</td><td>二进制形式的中等长度文本数据</td></tr><tr><td>mediumtext</td><td>0-16777215 bytes</td><td>中等长度文本数据</td></tr><tr><td>longblob</td><td>0-4294967295 bytes</td><td>二进制形式的极大文本数据</td></tr><tr><td>longtext</td><td>0-4294967295 bytes</td><td>极大文本数据</td></tr></tbody></table><ul><li>日期类型：</li></ul><table><thead><tr><th>类型</th><th>大小</th><th>范围</th><th>格式</th><th>描述</th></tr></thead><tbody><tr><td>date</td><td>3</td><td>1000-01-01 至 9999-12-31</td><td>YYYY-MM-DD</td><td>日期值</td></tr><tr><td>time</td><td>3</td><td>-838:59:59 至 838：59：59</td><td>HH:MM:SS 时间值或持续时间</td><td>时间值或持续时间</td></tr><tr><td>year</td><td>1</td><td>1901 至 2155</td><td>YYYY</td><td>年份值</td></tr><tr><td>datetime</td><td>8</td><td>1000-01-0100:00:00 至 9999-12-3123：59：59</td><td>YYYY-MM-DD HH:MM:SS</td><td>混合日期和时间值</td></tr><tr><td>timestamp</td><td>4</td><td>1970-01-0100:00:01 至 2038-01-1903:14:07</td><td>YYYY-MM-DD HH:MM:SS</td><td>混合日期和时间值，时间戳</td></tr></tbody></table><h3 id="ddl-表操作-修改"><a class="anchor" href="#ddl-表操作-修改">#</a> DDL - 表操作 - 修改</h3><p>添加字段<br><code>alter table 表名 add 字段名 类型（长度） [comment注释] [约束];</code><br>修改数据类型<br><code>alter table 表名 modify 字段名 新数据类型（长度）;</code><br>修改字段名和字段类型<br><code>alter table 表名 change 旧字段名 新字段名 类型（长度）[comment注释][约束];</code><br>删除字段<br><code>alter table 表名 drop 字段名;</code><br>修改表名<br><code>alter table 表名 rename to 新表名;</code></p><h3 id="ddl-表操作-删除"><a class="anchor" href="#ddl-表操作-删除">#</a> DDL - 表操作 - 删除</h3><p>删除表<br><code>drop table 表名;</code><br>删除指定表 并重新创建该表<br><code>truncate table 表名;</code></p><ul><li>在删除表时 表中的全部数据也会被删除</li></ul><h2 id="del-添加数据"><a class="anchor" href="#del-添加数据">#</a> DEL - 添加数据</h2><p>1. 给指定字段添加数据<br><code>insert into 表名（字段名1.……） values（值1,……）;</code><br>2. 给全部字段添加数据<br><code>insert into 表名 values (值1,值2);</code><br>3. 批量添加数据<br><code>insert into 表名（字段1,……） values（值1,……）,（值1,……）,（值1,……）;</code><br><code>insert into 表名 values（值1,……）（值1,……）（值1,……）;</code></p><h2 id="dml-修改数据"><a class="anchor" href="#dml-修改数据">#</a> DML - 修改数据</h2><p>DML - 修改数据<br><code>update 表名 set 字段名1=值1,字段名2=值2,……[where条件];</code><br>注意：修改语句的条件可以有 也可以没有 如果没有条件 则会修改整张表的所有 数据</p><h3 id="dml-删除数据"><a class="anchor" href="#dml-删除数据">#</a> DML - 删除数据</h3><p><code>delete from 表名 [where 条件]</code><br>注意：</p><ul><li>delete 语句的条件可以有，也可以没有，如果没有条件，则会删除整张表的所有数据。</li><li>delete 语句不能删除某一个字段的值 (可以使用 update)</li></ul><h2 id="dql-语法"><a class="anchor" href="#dql-语法">#</a> DQL - 语法</h2><p>编写顺序：select - 字段列表 from - 表名列表 where - 条件列表 group by - 分组字段列表 having - 分组后条件列表 order by - 排序字段列表 limit - 分页参数<br>执行顺序：1.from - 表名列表 2.where - 条件列表 3.group by - 分组字段列表 having - 分组后条件列表 4.select - 字段列表 5.order by - 排序字段列表 6.limit - 分页参数</p><h3 id="dql-基本查询"><a class="anchor" href="#dql-基本查询">#</a> DQL - 基本查询</h3><p>1. 查询多个字段<br><code>select 字段1，字段2，字段3… from 表名;</code><br><code>select * from 表名;</code><br>2. 设置别名<br><code>select 字段1 [as别名]…from 表名;</code><br>3. 去除重复记录<br><code>select distinct 字段列表 from 表名;</code></p><h3 id="dql-条件查询"><a class="anchor" href="#dql-条件查询">#</a> DQL - 条件查询</h3><p>1. 条件<br><code>select 字段列表 from 表名 where 条件列表</code></p><table><thead><tr><th style="text-align:center">比较运算符</th><th style="text-align:center">功能</th><th></th><th style="text-align:center">逻辑运算符</th><th style="text-align:center">功能</th></tr></thead><tbody><tr><td style="text-align:center">&gt;</td><td style="text-align:center">大于</td><td></td><td style="text-align:center">and 或 &amp;&amp;</td><td style="text-align:center">并且（多个条件同时成立）</td></tr><tr><td style="text-align:center">&gt;=</td><td style="text-align:center">大于等于</td><td></td><td style="text-align:center">or 或丨丨</td><td style="text-align:center">或者（多个条件任意一个成立）</td></tr><tr><td style="text-align:center">&lt;</td><td style="text-align:center">小于</td><td></td><td style="text-align:center">not 或！</td><td style="text-align:center">非，不是</td></tr><tr><td style="text-align:center">&lt;=</td><td style="text-align:center">小于等于</td></tr><tr><td style="text-align:center">=</td><td style="text-align:center">等于</td></tr><tr><td style="text-align:center">&lt;&gt; 或！</td><td style="text-align:center">不等于</td></tr><tr><td style="text-align:center">between…and…</td><td style="text-align:center">在某个范围之内（含最小、最大值）</td></tr><tr><td style="text-align:center">in（……）</td><td style="text-align:center">在 in 之后的列表中的值 多选一</td></tr><tr><td style="text-align:center">like 占位符</td><td style="text-align:center">模糊匹配（_匹配单个字符，% 匹配任意个字符）</td></tr><tr><td style="text-align:center">is null</td><td style="text-align:center">是 null</td></tr></tbody></table><h3 id="dql-聚合函数"><a class="anchor" href="#dql-聚合函数">#</a> DQL - 聚合函数</h3><ul><li>将一列数据作为一个整体 进行纵向计算</li><li>常见聚合函数</li></ul><table><thead><tr><th style="text-align:center">函数</th><th style="text-align:center">功能</th></tr></thead><tbody><tr><td style="text-align:center">count</td><td style="text-align:center">统计数量</td></tr><tr><td style="text-align:center">max</td><td style="text-align:center">最大值</td></tr><tr><td style="text-align:center">min</td><td style="text-align:center">最小值</td></tr><tr><td style="text-align:center">avg</td><td style="text-align:center">平均值</td></tr><tr><td style="text-align:center">sum</td><td style="text-align:center">求和</td></tr></tbody></table><p>语法<br><code>select 聚合函数（字段列表）from 表名;</code><br>注意：null 值不参与所有聚合函数运算</p><h3 id="dql-分组查询"><a class="anchor" href="#dql-分组查询">#</a> DQL - 分组查询</h3><p>1. 语法<br><code>select 字段列表 from 表名 [where 条件] group by 分组字段名 [having 分组后过滤条件];</code></p><ul><li><p>where 与 having 区别</p></li><li><p>执行时机不:where 是分组之前进行过滤 不满足 where 条件，不参与分组 而 having 是分组之后对结果进行过滤</p></li><li><p>判断条件不同：where 不能对聚合函数进行判断 而 having 可以</p></li><li><p>注意</p></li><li><p>执行顺序:where &gt; 聚合函数 &gt; having</p></li><li><p>分组之后 询的字段一般为聚合函数和分组字段 查询其他字段无任何意义</p></li></ul><h3 id="dql-排序查询"><a class="anchor" href="#dql-排序查询">#</a> DQL - 排序查询</h3><p>1. 语法<br><code>select 字段列表 from 表名 order by 字段1 排序方式1 字段2 排序方式2;</code><br>2. 排序方式<br>asc：升序（默认值）<br>desc：降序<br>注意：如果是多字段排序 当第一个字段值相同时 才会根据第二个字段进行排序</p><h3 id="dql-分页查询"><a class="anchor" href="#dql-分页查询">#</a> DQL - 分页查询</h3><p>1. 语法<br><code>select 字段列表 from 表名 limit 起始索引 查询记录数;</code></p><ul><li>注意</li><li>起始索引从 0 开始，起始索引 =（查询页码 - 1)* 每页显示记录数</li><li>分页查询是数据库的方言，不同的数据库有不同的实现，MySQL 中 IMT</li><li>如果查询的是第一页数据，起始索引可以省略，直接简写为 limit10</li></ul><h2 id="dcl-管理用户"><a class="anchor" href="#dcl-管理用户">#</a> DCL - 管理用户</h2><p>1. 查询用户</p><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">use</span> mysql<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>2. 创建用户<br><code>create user '用户名'@'主机名' identified by '密码';</code><br>3. 修改用户密码<br><code>alter user '用户名'@'主机名' identified with mysql_native_password by '新密码';</code><br>4. 删除用户<br><code>drop user '用户名'@'主机名';</code></p><ul><li>注意：</li><li>主机名可以使用 % 通配</li><li>这类 SQL 开发人员操作的比较少 主要是 DBA（Database Administrator 数据库管理员）使用</li></ul><h3 id="dcl-权限控制"><a class="anchor" href="#dcl-权限控制">#</a> DCL - 权限控制</h3><p>mysql 中定义了很多种权限 但是常用的就以下几种：</p><table><thead><tr><th style="text-align:center">权限</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center">all,all privileges</td><td style="text-align:center">所有权限</td></tr><tr><td style="text-align:center">select</td><td style="text-align:center">查询数据</td></tr><tr><td style="text-align:center">insert</td><td style="text-align:center">插入数据</td></tr><tr><td style="text-align:center">update</td><td style="text-align:center">修改数据</td></tr><tr><td style="text-align:center">delete</td><td style="text-align:center">删除数据</td></tr><tr><td style="text-align:center">alter</td><td style="text-align:center">修改表</td></tr><tr><td style="text-align:center">drop</td><td style="text-align:center">删除数据库 / 表 / 视图</td></tr><tr><td style="text-align:center">create</td><td style="text-align:center">创建数据库 / 表</td></tr></tbody></table><h3 id="dcl-权限控制-2"><a class="anchor" href="#dcl-权限控制-2">#</a> DCL - 权限控制</h3><p>1. 查询权限<br><code>show grants for '用户名'@'主机名';</code><br>2. 授予权限<br><code>grant 权限列表 on 数据库名.表名 to '用户名'@'主机名';</code><br>3. 撤销权限<br><code>revoke 权限列表 on 数据库名.表名 from '用户名'@'主机名';</code></p><ul><li>注意：</li><li>多个权限之间，使用逗号分隔</li><li>授权时，数据库名和表名可以使用 * 进行通配 代表所有</li></ul><h1 id="函数"><a class="anchor" href="#函数">#</a> 函数</h1><p>函数：是指一段可以直接被另一段程序调用的程序或代码</p><h2 id="字符串函数"><a class="anchor" href="#字符串函数">#</a> 字符串函数</h2><p>mysql 中内置了很多字符串函数 常用的几个如下：</p><table><thead><tr><th>函数</th><th>功能</th></tr></thead><tbody><tr><td>concat（s1,s2,…sn）</td><td>字符串拼接 将 s1,s1…sn 拼接成一个字符串</td></tr><tr><td>lower（str）</td><td>将字符串 str 全部转为小写</td></tr><tr><td>upper（str）</td><td>将字符串 str 全部转为大写</td></tr><tr><td>lpad（str,n,pad）</td><td>左填充，用字符串 pad 对 str 的左边进行填充，达到 n 个字符串长度</td></tr><tr><td>rpad（str,n,pad）</td><td>右填充，用字符串 pad 对 str 的右边进行填充，达到 n 个字符串长度</td></tr><tr><td>trim（str）</td><td>去掉字符串头部和尾部的空格</td></tr><tr><td>substring（str,start,len）</td><td>返回从字符串 str 从 start 位置起的 len 个长度的字符串</td></tr></tbody></table><p><code>select 函数（参数）</code><br>示例：</p><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">-- concat</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">select</span> concat<span class="token punctuation">(</span><span class="token string">'hello '</span><span class="token punctuation">,</span><span class="token string">'mysql'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">--lower</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">select</span> lower<span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">--upper</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">select</span> upper<span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">--lpad</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">select</span> lpad<span class="token punctuation">(</span><span class="token string">'01'</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">--rpad</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">select</span> rpad<span class="token punctuation">(</span><span class="token string">'01'</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">-- trim</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">select</span> trim<span class="token punctuation">(</span><span class="token string">' hello mysql '</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">--substring</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">select</span> substring<span class="token punctuation">(</span><span class="token string">'hellomysql'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="数值函数"><a class="anchor" href="#数值函数">#</a> 数值函数</h2><p>常见的数值函数如下：</p><table><thead><tr><th style="text-align:center">函数</th><th style="text-align:center">功能</th></tr></thead><tbody><tr><td style="text-align:center">ceil(x)</td><td style="text-align:center">向上取整</td></tr><tr><td style="text-align:center">floor(x)</td><td style="text-align:center">向下取整</td></tr><tr><td style="text-align:center">mod(x,y)</td><td style="text-align:center">返回 x/y 的余数</td></tr><tr><td style="text-align:center">rand()</td><td style="text-align:center">返回 0~1 内的随机数</td></tr><tr><td style="text-align:center">round(x,y)</td><td style="text-align:center">求参数 x 的四舍五入的值 保留 y 位小数</td></tr></tbody></table><p>示例；</p><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">-- 数值函数</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">select</span> ceil<span class="token punctuation">(</span><span class="token number">1.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">select</span> floor<span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">select</span>  <span class="token function">mod</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">select</span> rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">2.3445456</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">-- 获取六位验证码</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">select</span> lpad<span class="token punctuation">(</span><span class="token function">round</span><span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">1000000</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="日期函数"><a class="anchor" href="#日期函数">#</a> 日期函数</h2><p>常见的日期函数如下：</p><table><thead><tr><th style="text-align:center">函数</th><th style="text-align:center">功能</th></tr></thead><tbody><tr><td style="text-align:center">curdate()</td><td style="text-align:center">返回当前日期</td></tr><tr><td style="text-align:center">curtime()</td><td style="text-align:center">返回当前时间</td></tr><tr><td style="text-align:center">now()</td><td style="text-align:center">返回当前日期和时间</td></tr><tr><td style="text-align:center">year(date)</td><td style="text-align:center">获取指定 date 的年份</td></tr><tr><td style="text-align:center">month(date)</td><td style="text-align:center">获取指定 date 的月份</td></tr><tr><td style="text-align:center">day(date)</td><td style="text-align:center">获取指定 date 的日期</td></tr><tr><td style="text-align:center">date_add(date,interval expr type)</td><td style="text-align:center">返回一个日期 / 时间值加上一个时间间隔 xpr 后的时间值</td></tr><tr><td style="text-align:center">datediff(date1,date2)</td><td style="text-align:center">返回起始时间 date1 和结束时间 date2 之间的天数</td></tr></tbody></table><p>示例：</p><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">-- 日期函数</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">-- curdate</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">select</span> curdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">-- curtime</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">select</span> curtime<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">-- now</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">select</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">-- year month day</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">select</span> <span class="token keyword">year</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">select</span> <span class="token keyword">month</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">select</span> <span class="token keyword">day</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">-- date_add datediff</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">interval</span> <span class="token number">60</span> <span class="token keyword">day</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">select</span> datediff<span class="token punctuation">(</span><span class="token string">'2025-10-01'</span><span class="token punctuation">,</span><span class="token string">'2021-10-01'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">-- 案例：查询所有员工的入职天数，并根据入职天数倒序排序</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">select</span> name<span class="token punctuation">,</span>datediff<span class="token punctuation">(</span>curdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>entrydate<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'entrydays'</span><span class="token keyword">from</span> emp  <span class="token keyword">order</span> <span class="token keyword">by</span> entrydays <span class="token keyword">desc</span><span class="token punctuation">;</span><span class="token comment">-- as 'entrydays' 起别名</span></pre></td></tr></table></figure><h2 id="流程函数"><a class="anchor" href="#流程函数">#</a> 流程函数</h2><p>流程函数也是很常用的一类函数 可以在 sql 语句中实现条件筛选 从而提高语句的效率</p><table><thead><tr><th>函数</th><th>功能</th></tr></thead><tbody><tr><td>if(value,t,f)</td><td>如果 value 为 true, 则返回 t, 否则返回 f</td></tr><tr><td>ifnull(value1,value2)</td><td>如果 value1 不为空，返回 value1, 否则返回 value2</td></tr><tr><td>case when 【val1】 then 【res1】…else【default】end</td><td>如果 val1 为 true, 返回 res1,… 否则返回 default 默认值</td></tr><tr><td>case 【expr】when【val1】then 【res1】…else【default】end</td><td>如果 expr 的值等于 val1, 返回 res1,. 否则返回 default 默认值</td></tr></tbody></table><p>示例</p><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">-- 流程函数</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">--if</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">select</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token string">'ok'</span><span class="token punctuation">,</span><span class="token string">'error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">-- ifnull</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">select</span> ifnull<span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">,</span><span class="token string">'error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># 返回 ok</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">select</span> ifnull<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span><span class="token string">'error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># 返回值为空</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">select</span> ifnull<span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment"># 返回第二个值</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">-- 案例：统计班级各个学员的成绩，展示的规则如下：</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">-- case when 【val1】 then 【res1】…else【default】end</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">create</span> <span class="token keyword">table</span> score</pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        id      <span class="token keyword">int</span> <span class="token keyword">comment</span> <span class="token string">'ID'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        name    <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'姓名'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        math    <span class="token keyword">int</span> <span class="token keyword">comment</span> <span class="token string">'数学'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        english <span class="token keyword">int</span> <span class="token keyword">comment</span> <span class="token string">'英语'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        chinese <span class="token keyword">int</span> <span class="token keyword">comment</span> <span class="token string">'语文'</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">)</span><span class="token keyword">comment</span><span class="token string">'学员成绩表'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">insert</span> <span class="token keyword">into</span> score<span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english<span class="token punctuation">,</span> chinese<span class="token punctuation">)</span> <span class="token keyword">VALUEs</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token number">67</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">95</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Rose'</span> <span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'Jack'</span><span class="token punctuation">,</span> <span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">98</span><span class="token punctuation">,</span> <span class="token number">76</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token comment">-- >=85，展示优秀 I</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token comment">-- >= 60，展示及格</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token comment">-- 否则，展示不及格</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> score<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token keyword">select</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    id<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    name<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token punctuation">(</span><span class="token keyword">case</span> <span class="token keyword">when</span> math  <span class="token operator">>=</span><span class="token number">85</span> <span class="token keyword">then</span><span class="token string">'优秀'</span><span class="token keyword">when</span> math<span class="token operator">>=</span><span class="token number">60</span> <span class="token keyword">then</span> <span class="token string">'及格'</span><span class="token keyword">else</span> <span class="token string">'不及格'</span><span class="token keyword">end</span><span class="token punctuation">)</span><span class="token string">'数学'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">(</span><span class="token keyword">case</span> <span class="token keyword">when</span>  english<span class="token operator">>=</span><span class="token number">85</span> <span class="token keyword">then</span><span class="token string">'优秀'</span><span class="token keyword">when</span> english<span class="token operator">>=</span><span class="token number">60</span> <span class="token keyword">then</span> <span class="token string">'及格'</span><span class="token keyword">else</span> <span class="token string">'不及格'</span><span class="token keyword">end</span><span class="token punctuation">)</span><span class="token string">'英语'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">(</span><span class="token keyword">case</span> <span class="token keyword">when</span>  chinese<span class="token operator">>=</span><span class="token number">85</span> <span class="token keyword">then</span><span class="token string">'优秀'</span><span class="token keyword">when</span> chinese<span class="token operator">>=</span><span class="token number">60</span> <span class="token keyword">then</span> <span class="token string">'及格'</span><span class="token keyword">else</span> <span class="token string">'不及格'</span><span class="token keyword">end</span><span class="token punctuation">)</span><span class="token string">'语文'</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token keyword">from</span> score<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token comment">-- case 【expr】when【val1】then 【res1】…else【default】end</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token keyword">select</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        name<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token keyword">case</span> workaddress <span class="token keyword">when</span> <span class="token string">'北京'</span> <span class="token keyword">then</span> <span class="token string">'一线城市'</span><span class="token keyword">else</span><span class="token string">'二线城市'</span><span class="token keyword">end</span> <span class="token keyword">as</span> <span class="token string">'工作地址'</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token keyword">from</span> emp<span class="token punctuation">;</span></pre></td></tr></table></figure><h1 id="约束"><a class="anchor" href="#约束">#</a> 约束</h1><ol><li>概念：约束是作用于表中字段上的规则 踊跃限制存储在表中的数据</li><li>目的：保证数据库中数据的正确 有效性和完整性</li><li>分类：</li></ol><table><thead><tr><th>约束</th><th>描述</th><th>关键字</th></tr></thead><tbody><tr><td>非空约束</td><td>限制该字段的数据不能为 null</td><td>not null</td></tr><tr><td>唯一约束</td><td>保证该字段的所有数据都是唯一 不重复的</td><td>unique</td></tr><tr><td>主键约束</td><td>主键是一行数据的唯一标识 要求非空且唯一</td><td>primary key</td></tr><tr><td>默认约束</td><td>保存数据时 如果未指定该字段的值 则采用默认值</td><td>default</td></tr><tr><td>检查约束（8.0.16）</td><td>保证字段值满足某一个条件</td><td>check</td></tr><tr><td>外键约束</td><td>用来让两张表的数据之间建立连接 保证数据的一致性和完整性</td><td>foreign key</td></tr></tbody></table><p>注意：约束是作用于表中字段上的 可以在创建表 / 修改表的时候添加约束<br>案例：</p><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">create</span> <span class="token keyword">table</span> user2<span class="token punctuation">(</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span> <span class="token keyword">comment</span><span class="token string">'主键id'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">unique</span> <span class="token keyword">comment</span> <span class="token string">'姓名'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    age <span class="token keyword">int</span> <span class="token keyword">check</span> <span class="token punctuation">(</span> age<span class="token operator">></span><span class="token number">0</span> <span class="token operator">and</span> age<span class="token operator">&lt;</span> <span class="token number">120</span> <span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'年龄'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">status</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">'1'</span> <span class="token keyword">comment</span> <span class="token string">'状态'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    gender <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'性别'</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">)</span><span class="token keyword">comment</span> <span class="token string">'用户表'</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="外键约束"><a class="anchor" href="#外键约束">#</a> 外键约束</h2><ul><li>概念：</li><li>外键用来让两张表的数据之间建立连接 从而保证数据的一致性和完整性</li><li>语法：</li><li>添加外键 方式一：</li></ul><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        字段名 数据类型<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        …</pre></td></tr><tr><td data-num="4"></td><td><pre>        constralnt 外键名 <span class="token keyword">foreign</span> <span class="token keyword">key</span> 外键字段名 <span class="token keyword">references</span> 主表 <span class="token punctuation">(</span>主表列名<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>方式二： <code>alter table 表名 add constralnt 外键名称 foreigh key 外键字段名 references 主表(主表列名);</code></p><ul><li>删除外键<br><code>alter table 表名 drop foreign key 外键名称;</code></li><li>删除 / 更新行为</li></ul><table><thead><tr><th style="text-align:left">行为</th><th style="text-align:left">说明</th></tr></thead><tbody><tr><td style="text-align:left">no action</td><td style="text-align:left">当在父表中删除 / 更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除更新 (与 restrict 一致)</td></tr><tr><td style="text-align:left">restrict</td><td style="text-align:left">当在父表中删除 / 更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除更新 (与 no action)</td></tr><tr><td style="text-align:left">cascade</td><td style="text-align:left">当在父表中删除 / 更新对应记录时，首先检查该记录是否有对应外键，如果有，则也删除 / 更新外键在子表中的记录</td></tr><tr><td style="text-align:left">set null</td><td style="text-align:left">当在父表中删除对应记录时，首先检查该记录是否有对应外键，如果有则设置子表中该外键值为 ull (这就要求该外键允许取 null)</td></tr><tr><td style="text-align:left">set default</td><td style="text-align:left">父表有变更时 子表将外键列设置成一个默认的值 (Innodb 不支持)</td></tr></tbody></table><ul><li>语法：<br><code>alter table 表名 add constralnt 外键名称 foreigh key 外键字段名 references 主表(主表列名)on update cascade on delete cascade;</code></li><li>案例</li></ul><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">-- 创建表</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">create</span> <span class="token keyword">table</span> dept<span class="token punctuation">(</span></pre></td></tr><tr><td data-num="3"></td><td><pre>                         id <span class="token keyword">int</span> <span class="token keyword">auto_increment</span> <span class="token keyword">comment</span> <span class="token string">'ID'</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>                         name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'部门名称'</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">)</span><span class="token keyword">comment</span> <span class="token string">'部门'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">insert</span> <span class="token keyword">into</span> dept<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'研发部'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'市场部'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'财务部'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'销售部'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'总经办'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">create</span> <span class="token keyword">table</span> emp<span class="token punctuation">(</span></pre></td></tr><tr><td data-num="10"></td><td><pre>                        Id <span class="token keyword">int</span> <span class="token keyword">auto_increment</span> <span class="token keyword">comment</span> <span class="token string">'ID'</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>                        name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'姓名'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>                        age <span class="token keyword">int</span> <span class="token keyword">comment</span><span class="token string">'年龄'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>                        job <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token keyword">comment</span> <span class="token string">'职位'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>                        salary <span class="token keyword">int</span> <span class="token keyword">comment</span><span class="token string">'薪资'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>                        entrydate <span class="token keyword">date</span> <span class="token keyword">comment</span> <span class="token string">'入职时间'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>                        managerid <span class="token keyword">int</span> <span class="token keyword">comment</span><span class="token string">'直属领导ID'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>                        dept_id <span class="token keyword">int</span> <span class="token keyword">comment</span> <span class="token string">'部门ID'</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">)</span><span class="token keyword">comment</span><span class="token string">'员工表'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">-- 添加数据</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> emp <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job<span class="token punctuation">,</span>salary<span class="token punctuation">,</span> entrydate<span class="token punctuation">,</span> managerid<span class="token punctuation">,</span> dept_id<span class="token punctuation">)</span> <span class="token keyword">vALUES</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'金庸'</span><span class="token punctuation">,</span><span class="token number">66</span> <span class="token punctuation">,</span><span class="token string">'总裁'</span><span class="token punctuation">,</span><span class="token number">20000</span><span class="token punctuation">,</span><span class="token string">'2000-01-01'</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'张无忌'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">'项目经理'</span><span class="token punctuation">,</span><span class="token number">12500</span><span class="token punctuation">,</span><span class="token string">'2005-12-05'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'杨逍'</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token string">'开发'</span><span class="token punctuation">,</span><span class="token number">8400</span><span class="token punctuation">,</span><span class="token string">'2000-11-03'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'韦一笑'</span><span class="token punctuation">,</span><span class="token number">48</span><span class="token punctuation">,</span><span class="token string">'开发'</span><span class="token punctuation">,</span><span class="token number">11000</span><span class="token punctuation">,</span><span class="token string">'2002-02-05'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'常遇春'</span><span class="token punctuation">,</span><span class="token number">43</span><span class="token punctuation">,</span><span class="token string">'开发'</span><span class="token punctuation">,</span><span class="token number">10500</span><span class="token punctuation">,</span><span class="token string">'2004-09-07'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">'小昭'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token string">'程序员鼓励师'</span><span class="token punctuation">,</span><span class="token number">6600</span><span class="token punctuation">,</span><span class="token string">'2004-10-12'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token comment">-- 添加外键</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token keyword">alter</span> <span class="token keyword">table</span> emp <span class="token keyword">add</span> <span class="token keyword">constraint</span> fk_emp_dept_id <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>dept_id<span class="token punctuation">)</span> <span class="token keyword">references</span> dept<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment">-- 删除外键</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token keyword">alter</span> <span class="token keyword">table</span> emp <span class="token keyword">drop</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span> fk_emp_dept_id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token comment">-- 外键的删除和更新行为</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token comment">-- cascade</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token keyword">alter</span> <span class="token keyword">table</span> emp <span class="token keyword">add</span> <span class="token keyword">constraint</span> fk_emp_dept_id <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>dept_id<span class="token punctuation">)</span> <span class="token keyword">references</span> dept<span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">cascade</span> <span class="token keyword">on</span> <span class="token keyword">delete</span> <span class="token keyword">cascade</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token comment">-- set null</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token keyword">alter</span> <span class="token keyword">table</span> emp <span class="token keyword">add</span> <span class="token keyword">constraint</span> fk_emp_dept_id <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>dept_id<span class="token punctuation">)</span> <span class="token keyword">references</span> dept<span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">set</span> <span class="token boolean">null</span> <span class="token keyword">on</span> <span class="token keyword">delete</span> <span class="token keyword">set</span> <span class="token boolean">null</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h1 id="多表查询"><a class="anchor" href="#多表查询">#</a> 多表查询</h1><h2 id="多表关系"><a class="anchor" href="#多表关系">#</a> 多表关系</h2><ul><li>概述<br>项目开发中，在进行数据库表结构设计时，会根据业务需求及业务模块之间的关系，分析并设计表结构，由于业务之间相互关联，所<br>以各个表结构之间也存在着各种联系，基本上分为三种：1. 一对多（多对一）2. 多对多 3. 一对一</li></ul><blockquote><p>一对多（多对一）<br>案例：部门与员工的关系<br>关系：一个部门对应多个员工 一个员工对应一个部门<br>实现：在多的一方建立外键 指向一的一方的主键</p></blockquote><blockquote><p>多对多<br>案例：学生与课程的关系<br>关系：一个学生可以选修多门课程 一门课程也可以供多个学生<br>实现：建立第三张中间表 中间表至少包含两个外键 分别关联两个主键</p></blockquote><blockquote><p>一对一<br>案例：用户与用户详情的关系<br>关系：一对一关系，多用于单表拆分，将一张表的基础字段放在一张表中，其他详情字段放在另一张表中，以提升操作效率<br>实现：在任意一方加入外键，关联另外一方的主键，并且设置外键为唯一的 (UNIQUE)</p></blockquote><h2 id="多表查询概述"><a class="anchor" href="#多表查询概述">#</a> 多表查询概述</h2><ul><li>概述：指从多张表中查询数据</li><li>笛卡尔积：笛卡尔乘积是指在数学中，两个集合 A 集合和 B 集合的所有组合情况 <code>（在多表查询时，需要消除无效的笛 卡尔积)</code></li><li>示例：<br><code>select * from emp ,dept where emp.dept_id =dept.id</code></li><li>多表查询分类<br>连接查询分为：<br>内连接：相当于查询 A,B 交集部分是数据<br>外连接：</li></ul><ol><li>左外连接：查询左表所有数据，以及两张表交集部分数据</li><li>右外连接：查询右表所有数据，以及两张表交集部分数据<br>自连接：当前表与自身的连接查询，自连接必须使用表别名</li></ol><h2 id="内连接"><a class="anchor" href="#内连接">#</a> 内连接</h2><p>内连接查询语法：<br>隐式内连接 <code>select 字段列表 from 表1,表2 where 条件;</code><br>显示内连接 <code>select 字段列表 from 表1【inner】join 表2 连接条件;</code></p><ul><li>内连接演示</li></ul><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">-- 1. 查询每一个员工的姓名，及关联的部门的名称（隐式内连接实现）</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">-- 表结构：emp，dept</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">-- 连接条件：emp.dept_id=dept.id</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">select</span> emp<span class="token punctuation">.</span>name <span class="token punctuation">,</span>dept<span class="token punctuation">.</span>name <span class="token keyword">from</span> emp <span class="token punctuation">,</span> dept <span class="token keyword">where</span> emp<span class="token punctuation">.</span>dept_id <span class="token operator">=</span> dept<span class="token punctuation">.</span>id <span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">-- 起别名</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">select</span> e<span class="token punctuation">.</span>name<span class="token punctuation">,</span>d<span class="token punctuation">.</span>name <span class="token keyword">from</span> emp e<span class="token punctuation">,</span>dept d <span class="token keyword">where</span> e<span class="token punctuation">.</span>dept_id <span class="token operator">=</span> d<span class="token punctuation">.</span>id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">-- 2. 查询每一个员工的姓名，及关联的部门的名称（显式内连接实现）</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">-- 表结构：emp，dept</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">-- 连接条件：emp.dept_id=dept.id</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">select</span> e<span class="token punctuation">.</span>name<span class="token punctuation">,</span> d<span class="token punctuation">.</span>name <span class="token keyword">from</span> emp e <span class="token keyword">inner</span> <span class="token keyword">join</span> dept d <span class="token keyword">on</span> e<span class="token punctuation">.</span>dept_id <span class="token operator">=</span> d<span class="token punctuation">.</span>id<span class="token punctuation">;</span><span class="token comment">-- inner 可以省略</span></pre></td></tr></table></figure><h2 id="外连接"><a class="anchor" href="#外连接">#</a> 外连接</h2><p>外连接查询语法：<br>左外连接 <code>select 字段列表 from 表1 left 【outer】 join 表2 条件;</code><br>右外连接 <code>select 字段列表 from 表1 right 【outer】 join 表2 条件;</code></p><h2 id="自连接"><a class="anchor" href="#自连接">#</a> 自连接</h2><p>自连接查询语法：<br><code>select 字段列表 form 表A 别名A join 表A 别名B on 条件;</code><br><code>自连接查询 可以是内连接查询 也可以是外连接查询</code><br>自连接示例：</p><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">-- 1. 查询员工 及其 所属领导的名字</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">-- 表结构 emp</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">select</span> a<span class="token punctuation">.</span>name <span class="token punctuation">,</span>b<span class="token punctuation">.</span>name <span class="token keyword">from</span> emp a <span class="token punctuation">,</span>emp b <span class="token keyword">where</span> a<span class="token punctuation">.</span>managerid <span class="token operator">=</span>b<span class="token punctuation">.</span>id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">-- 2. 查询所有员工 emp 及其领导的名字 emp，如果员工没有领导，也需要查询出来</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">-- 表结构:emp a，emp b</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">select</span> a<span class="token punctuation">.</span>name<span class="token punctuation">,</span>b<span class="token punctuation">.</span>name <span class="token keyword">from</span> emp a <span class="token keyword">left</span> <span class="token keyword">join</span> emp b <span class="token keyword">on</span> a<span class="token punctuation">.</span>managerid<span class="token operator">=</span>b<span class="token punctuation">.</span>id<span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="联合查询-union-union-all"><a class="anchor" href="#联合查询-union-union-all">#</a> 联合查询 - union union all</h2><ul><li>对于 union 查询 就是把多次查询的结果合并起来 形成一个新的查询结果集</li></ul><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表A </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">union</span> <span class="token keyword">all</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表B<span class="token punctuation">;</span></pre></td></tr></table></figure><ul><li>对于联合查询的多张表的列数必须保持一致 字段类型也需要保持一致</li><li>union all 会将全部的数据直接合并在一起 union 会对合并之后的数据去重</li></ul><h2 id="子查询"><a class="anchor" href="#子查询">#</a> 子查询</h2><ul><li>概念：SQL 语句中嵌套 select 语句 称为嵌套查询 又称子查询<br><code>select *from t1 where column = （select column from t2 where ……）;</code></li><li>子查询外部的语句可以是 INSERT/UPDATE/DELETE/SELECT 的任何一个</li><li>根据子查询结果不同 分为：</li><li>标量自查询（子查询结果为单个值）</li><li>列子查询（子查询结果为一行）</li><li>表子查询（子查询结果为多行多列）</li><li>子查询位置分为：where 之后 form 之后 select 之后</li></ul><h3 id="标量子查询"><a class="anchor" href="#标量子查询">#</a> 标量子查询</h3><p>子查询返回的结果是单个值（数字 字符串 日期等）最简单的形式 这种子查询称为标量子查询<br>常用的操作符：= &lt;&gt;(不等于) &gt;= &lt; &lt;=</p><h3 id="列子查询"><a class="anchor" href="#列子查询">#</a> 列子查询</h3><p>子查询返回的结果是一列（可以是多行）这种子查询称为列子查询<br>常用的操作符：in、not in、any、some、all</p><table><thead><tr><th>操作符</th><th>描述</th></tr></thead><tbody><tr><td>in</td><td>在指定的集合范围之内 多选一</td></tr><tr><td>not in</td><td>不在指定的集合范围之内</td></tr><tr><td>any</td><td>子查询返回列表中 有任意一个满足即可</td></tr><tr><td>some</td><td>与 any 等同 使用 some 的地方都可以使用 any</td></tr><tr><td>all</td><td>子查询返回列表的所有值都必须满足</td></tr></tbody></table><p>案例：</p><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">-- 列子查询</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">-- 1. 查询 销售部 和 市场部的所有员工信息</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">-- a. 查询 销售部 和 市场部 的部门 id</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">select</span> id <span class="token keyword">from</span> dept <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'销售部'</span> <span class="token operator">or</span> name <span class="token operator">=</span><span class="token string">'市场部'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">-- 根据部门 id 查询员工信息</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> emp <span class="token keyword">where</span> dept_id <span class="token operator">in</span><span class="token punctuation">(</span><span class="token keyword">select</span> id <span class="token keyword">from</span> dept <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'销售部'</span> <span class="token operator">or</span> name <span class="token operator">=</span><span class="token string">'市场部'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">-- 2. 查询比财务部所有人工资都高的员工信息</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">-- a. 查询所有财务部人员工资</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">select</span> id <span class="token keyword">from</span> dept <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'财务部'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">select</span> salary <span class="token keyword">from</span> emp <span class="token keyword">where</span> dept_id<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">select</span> id <span class="token keyword">from</span> dept <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'财务部'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">-- b. 比财务部所有人工资都高的员工信息</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> salary <span class="token operator">></span> <span class="token keyword">all</span><span class="token punctuation">(</span><span class="token keyword">select</span> salary <span class="token keyword">from</span> emp <span class="token keyword">where</span> dept_id<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">select</span> id <span class="token keyword">from</span> dept <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'财务部'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">-- 3. 查询比研发部其中任意一人工资高的员工信息</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">-- a. 查询研发部所有人工资</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">select</span> salary <span class="token keyword">from</span> emp <span class="token keyword">where</span> dept_id<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">select</span> id <span class="token keyword">from</span> dept <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'研发部'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">-- b. 比研发部其中任意一人工资高的员工信息</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> salary<span class="token operator">></span><span class="token keyword">any</span><span class="token punctuation">(</span><span class="token keyword">select</span> salary <span class="token keyword">from</span> emp <span class="token keyword">where</span> dept_id<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">select</span> id <span class="token keyword">from</span> dept <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'研发部'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="行子查询"><a class="anchor" href="#行子查询">#</a> 行子查询</h2><p>子查询返回的结果是一行（可以是多列）这种子查询称为行子查询<br>常用的操作符：=、&lt;&gt;、in、not in<br>案例：</p><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">-- 查询与 " 张无忌” 的薪资及直属领导相同的员工信息</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">-- a. 查询 "张无忌" 的薪资及直属领导</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">select</span> salary<span class="token punctuation">,</span> managerid <span class="token keyword">from</span> emp <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'张无忌'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">-- b. 查询与 " 张无忌” 的薪资及直属领导相同的员工信息；</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> <span class="token punctuation">(</span>salary<span class="token punctuation">,</span>managerid<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> salary<span class="token punctuation">,</span> managerid <span class="token keyword">from</span> emp <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'张无忌'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="表子查询"><a class="anchor" href="#表子查询">#</a> 表子查询</h2><p>子查询返回的结果是多行多列 这种子查询称为表子查询<br>常用的操作符：in</p><h1 id="事务"><a class="anchor" href="#事务">#</a> 事务</h1><h2 id="事务简介"><a class="anchor" href="#事务简介">#</a> 事务简介</h2><p>事务是一组操作的集合，它是一个不可分割的工作单位，事务会把所有的操作作为一个整体一起向系统提交或撤销操作<br>请求，即这些操作要么同时成功，要么同时失败<br>默认 MySQL 的事务是自动提交的，也就是说，当执行一条 DML 语句，MySQL 会立即隐式的提交事务</p><h2 id="事务操作"><a class="anchor" href="#事务操作">#</a> 事务操作</h2><ul><li>方式一：查看 / 设置事物提交方式</li></ul><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">select</span> @<span class="token variable">@autocommit</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">set</span> @<span class="token variable">@autocommit</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul><li>方式二：开启事务<br><code>start transaction 或 begin</code></li><li>提交事务<br><code>commit;</code></li><li>滚回事务<br><code>rollback;</code><br>案例：</li></ul><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">create</span> <span class="token keyword">table</span> account</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    id    <span class="token keyword">int</span> <span class="token keyword">auto_increment</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">comment</span> <span class="token string">'主键id'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    name  <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'姓名'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    money <span class="token keyword">int</span> <span class="token keyword">comment</span> <span class="token string">'余额'</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'账户表'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">insert</span> <span class="token keyword">into</span> account<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>money<span class="token punctuation">)</span><span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'张三'</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'李四'</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">-- 恢复数据</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">update</span> account <span class="token keyword">set</span> money <span class="token operator">=</span><span class="token number">2000</span> <span class="token keyword">where</span> name <span class="token operator">=</span><span class="token string">'张三'</span><span class="token operator">or</span> name<span class="token operator">=</span><span class="token string">'李四'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">-- 方式 1</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">select</span> @<span class="token variable">@autocommit</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">set</span> @<span class="token variable">@autocommit</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">-- 设置为手动</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">-- 转账</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">-- 查询张三余额</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> account <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'张三'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">-- 张三 - 1000</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">update</span> account <span class="token keyword">set</span> money<span class="token operator">=</span>money<span class="token operator">-</span><span class="token number">1000</span> <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'张三'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>执行报错<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">-- 李四 + 1000</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">update</span> account <span class="token keyword">set</span> money<span class="token operator">=</span>money<span class="token operator">+</span><span class="token number">1000</span> <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'李四'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token comment">-- 提交事务</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token keyword">commit</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token comment">-- 回滚事务</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token keyword">rollback</span> <span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token keyword">set</span> @<span class="token variable">@autocommit</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment">-- 方式 2</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token comment">-- 开启事务</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token comment">-- 转账</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token comment">-- 查询张三余额</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> account <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'张三'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token comment">-- 张三 - 1000</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token keyword">update</span> account <span class="token keyword">set</span> money<span class="token operator">=</span>money<span class="token operator">-</span><span class="token number">1000</span> <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'张三'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>执行报错<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token comment">-- 李四 + 1000</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token keyword">update</span> account <span class="token keyword">set</span> money<span class="token operator">=</span>money<span class="token operator">+</span><span class="token number">1000</span> <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'李四'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token comment">-- 提交事务</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token keyword">commit</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token comment">-- 回滚事务</span></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token keyword">rollback</span> <span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="事务的四大特性acid"><a class="anchor" href="#事务的四大特性acid">#</a> 事务的四大特性（ACID）</h2><p>原子性（Atomicity）：事务是不可分割的最小操作单元，要么全部成功，要么全部失败<br>一致性（Consistency）：事务完成时，必须使所有的数据都保持一致状态<br>隔离性（Isolation）：数据库系统提供的隔离机制，保证事务在不受外部并发操作影响的独立环境下运行<br>持久性（Durability）：事务一旦提交或回滚，它对数据库中的数据的改变就是永久的</p><h2 id="并发事务问题"><a class="anchor" href="#并发事务问题">#</a> 并发事务问题</h2><table><thead><tr><th style="text-align:left">问题</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">脏读</td><td style="text-align:left">一个事务读到另外一个事务还没有提交的数据</td></tr><tr><td style="text-align:left">不可重复读</td><td style="text-align:left">一个事务先后读取同一条记录，但两次读取的数据不同，称之为不可重复读</td></tr><tr><td style="text-align:left">幻读</td><td style="text-align:left">一个事务按照条件查询数据时，没有对应的数据行，但是在插入数据时，又发现这行数据已经存在，好像出现了” 幻影”</td></tr></tbody></table><h2 id="事务的隔离级别"><a class="anchor" href="#事务的隔离级别">#</a> 事务的隔离级别</h2><table><thead><tr><th style="text-align:left">隔离级别</th><th style="text-align:left">脏 读</th><th style="text-align:left">不可重复读</th><th style="text-align:left">幻读</th></tr></thead><tbody><tr><td style="text-align:left">read uncommitted</td><td style="text-align:left">√</td><td style="text-align:left">√</td><td style="text-align:left">√</td></tr><tr><td style="text-align:left">read committed</td><td style="text-align:left">×</td><td style="text-align:left">√</td><td style="text-align:left">√</td></tr><tr><td style="text-align:left">repeatable read (默认)</td><td style="text-align:left">×</td><td style="text-align:left">×</td><td style="text-align:left">√</td></tr><tr><td style="text-align:left">serializable</td><td style="text-align:left">×</td><td style="text-align:left">×</td><td style="text-align:left">×</td></tr></tbody></table><ul><li>查看事务隔离级别</li><li><code>select @@transaction_isolation;</code></li><li>设置事务隔离级别</li><li><code>set 【session丨global】transaction isolation level &#123;read uncommitted 丨read committed丨repeatable read(默认)丨serializable&#125;;</code></li></ul></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">Edited on</span> <time title="Modified: 2025-07-15 16:41:23" itemprop="dateModified" datetime="2025-07-15T16:41:23+08:00">2025-07-15</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> Donate</button><p>Give me a cup of [coffee]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="Years Pass WeChat Pay"><p>WeChat Pay</p></div><div><img data-src="/images/alipay.png" alt="Years Pass Alipay"><p>Alipay</p></div><div><img data-src="/images/paypal.png" alt="Years Pass PayPal"><p>PayPal</p></div></div></div><div id="copyright"><ul><li class="author"><strong>Post author: </strong>Years Pass <i class="ic i-at"><em>@</em></i>字节纪元</li><li class="link"><strong>Post link: </strong><a href="https://time-520.github.io/2025/07/07/MySQL/" title="MySQL基础">https://time-520.github.io/2025/07/07/MySQL/</a></li><li class="license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> unless stating additionally.</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2025/02/02/c++/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;www.dmoe.cc&#x2F;random.php?434614" title="C++基础入门"><span class="type">Previous Post</span> <span class="category"><i class="ic i-flag"></i></span><h3>C++基础入门</h3></a></div><div class="item right"></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="Contents"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#mysql%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">MySQL 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-number">1.1.</span> <span class="toc-text">数据库相关概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mysql%E5%90%AF%E5%8A%A8"><span class="toc-number">1.2.</span> <span class="toc-text">MySQL 启动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.3.</span> <span class="toc-text">客户端连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.4.</span> <span class="toc-text">数据模型</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#sql"><span class="toc-number">2.</span> <span class="toc-text">SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#sql%E9%80%9A%E7%94%A8%E8%AF%AD%E6%B3%95"><span class="toc-number">2.1.</span> <span class="toc-text">SQL 通用语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sql%E5%88%86%E7%B1%BB"><span class="toc-number">2.2.</span> <span class="toc-text">SQL 分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ddl-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="toc-number">2.3.</span> <span class="toc-text">DDL - 数据库操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ddl-%E8%A1%A8%E6%93%8D%E4%BD%9C-%E5%88%9B%E5%BB%BA"><span class="toc-number">2.3.1.</span> <span class="toc-text">DDL - 表操作 - 创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ddl-%E8%A1%A8%E6%93%8D%E4%BD%9C-%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.3.2.</span> <span class="toc-text">DDL - 表操作 - 查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ddl-%E8%A1%A8%E6%93%8D%E4%BD%9C-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.3.3.</span> <span class="toc-text">DDL - 表操作 - 数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ddl-%E8%A1%A8%E6%93%8D%E4%BD%9C-%E4%BF%AE%E6%94%B9"><span class="toc-number">2.3.4.</span> <span class="toc-text">DDL - 表操作 - 修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ddl-%E8%A1%A8%E6%93%8D%E4%BD%9C-%E5%88%A0%E9%99%A4"><span class="toc-number">2.3.5.</span> <span class="toc-text">DDL - 表操作 - 删除</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#del-%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-number">2.4.</span> <span class="toc-text">DEL - 添加数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dml-%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">2.5.</span> <span class="toc-text">DML - 修改数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#dml-%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">2.5.1.</span> <span class="toc-text">DML - 删除数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dql-%E8%AF%AD%E6%B3%95"><span class="toc-number">2.6.</span> <span class="toc-text">DQL - 语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#dql-%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.6.1.</span> <span class="toc-text">DQL - 基本查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dql-%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.6.2.</span> <span class="toc-text">DQL - 条件查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dql-%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-number">2.6.3.</span> <span class="toc-text">DQL - 聚合函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dql-%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.6.4.</span> <span class="toc-text">DQL - 分组查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dql-%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.6.5.</span> <span class="toc-text">DQL - 排序查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dql-%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.6.6.</span> <span class="toc-text">DQL - 分页查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dcl-%E7%AE%A1%E7%90%86%E7%94%A8%E6%88%B7"><span class="toc-number">2.7.</span> <span class="toc-text">DCL - 管理用户</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#dcl-%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6"><span class="toc-number">2.7.1.</span> <span class="toc-text">DCL - 权限控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dcl-%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6-2"><span class="toc-number">2.7.2.</span> <span class="toc-text">DCL - 权限控制</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">3.</span> <span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="toc-number">3.1.</span> <span class="toc-text">字符串函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E5%87%BD%E6%95%B0"><span class="toc-number">3.2.</span> <span class="toc-text">数值函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-number">3.3.</span> <span class="toc-text">日期函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E5%87%BD%E6%95%B0"><span class="toc-number">3.4.</span> <span class="toc-text">流程函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F"><span class="toc-number">4.</span> <span class="toc-text">约束</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">4.1.</span> <span class="toc-text">外键约束</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.</span> <span class="toc-text">多表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E5%85%B3%E7%B3%BB"><span class="toc-number">5.1.</span> <span class="toc-text">多表关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E6%A6%82%E8%BF%B0"><span class="toc-number">5.2.</span> <span class="toc-text">多表查询概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.3.</span> <span class="toc-text">内连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.4.</span> <span class="toc-text">外连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.5.</span> <span class="toc-text">自连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2-union-union-all"><span class="toc-number">5.6.</span> <span class="toc-text">联合查询 - union union all</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.7.</span> <span class="toc-text">子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E9%87%8F%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.7.1.</span> <span class="toc-text">标量子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.7.2.</span> <span class="toc-text">列子查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.8.</span> <span class="toc-text">行子查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.9.</span> <span class="toc-text">表子查询</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-number">6.</span> <span class="toc-text">事务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%AE%80%E4%BB%8B"><span class="toc-number">6.1.</span> <span class="toc-text">事务简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C"><span class="toc-number">6.2.</span> <span class="toc-text">事务操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9B%9B%E5%A4%A7%E7%89%B9%E6%80%A7acid"><span class="toc-number">6.3.</span> <span class="toc-text">事务的四大特性（ACID）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98"><span class="toc-number">6.4.</span> <span class="toc-text">并发事务问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="toc-number">6.5.</span> <span class="toc-text">事务的隔离级别</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="Related"></div><div class="overview panel" data-title="Overview"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Years Pass" data-src="/images/avatar.jpg"><p class="name" itemprop="name">Years Pass</p><div class="description" itemprop="description">字节 + 编年史，记录开发旅程与项目成长。</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">4</span> <span class="name">posts</span></a></div></nav><div class="social"></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>Home</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>Random Posts</h2><ul><li class="item"><div class="breadcrumb"></div><span><a href="/2025/07/07/MySQL/" title="MySQL基础">MySQL基础</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2025/02/02/c++/" title="C++基础入门">C++基础入门</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2025/01/21/c++%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/" title="C++核心编程">C++核心编程</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2025/01/20/c++%E6%8F%90%E9%AB%98%E7%BC%96%E7%A8%8B/" title="C++提高编程">C++提高编程</a></span></li></ul></div><div><h2>Recent Comments</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Years Pass @ ByteChronicle</span></div><div class="powered-by">Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2025/07/07/MySQL/",favicon:{show:"（●´3｀●）Goooood",hide:"(´Д｀)Booooom"},search:{placeholder:"Search for Posts",empty:"We didn't find any results for the search: ${query}",stats:"${hits} results found in ${time} ms"},valine:!0,fancybox:!0,copyright:'Copied to clipboard successfully! <br> All articles in this blog are licensed under <i class="ic i-creative-commons"></i>BY-NC-SA.',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->